import{b as Y,c as Z,e as ee}from"./chunk-XHOUWVJK.js";import{$ as q,B as l,E as B,F as J,H as F,I,J as N,K as $,L as g,M as _,N as S,O as m,P as r,Q as v,R as D,S as b,T as w,U as C,V as s,W as a,Y as p,Z as O,_ as W,aa as K,ca as X,ea as M,fa as z,ga as G,i as A,ia as H,ja as Q,k as u,ka as U,m as f,n as y,u as L,x as j,z as c}from"./chunk-GICHQEML.js";var R=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-assignment-root"]],decls:13,vars:0,consts:[[1,"app-cmp-nav"],["routerLinkActive","app-st-active"],["routerLink","./view"],[1,"material-symbols-outlined"],["routerLink","./form"]],template:function(e,i){e&1&&(m(0,"nav")(1,"ul",0)(2,"li",1)(3,"a",2)(4,"i",3),a(5,"view_list"),r(),a(6," View "),r()(),m(7,"li",1)(8,"a",4)(9,"i",3),a(10,"edit_document"),r(),a(11," Form "),r()()()(),v(12,"router-outlet"))},dependencies:[Q,U,H],encapsulation:2,changeDetection:0})};function re(){return[]}function te(t,n){return[...t,n]}function ne(t,n){return t.filter((e,i)=>i!==n)}function ie(t){return[...t,re()]}function oe(t,n){return t.filter((e,i)=>i!==n)}function ce(t,n){if(t&1){let e=w();m(0,"div"),a(1),v(2,"input",2),B(),m(3,"button",1),C("click",function(){let o=f(e).$index,d=s().$index,ae=s();return y(ae.onRemoveInput(d,o))}),a(4," X "),r()()}if(t&2){let e=n.$implicit,i=n.$index,o=s().$implicit;c(),p(" ",i+1,". "),c(),J(e,"formField"),c(),S("disabled",o.length===1)}}function me(t,n){if(t&1){let e=w();m(0,"fieldset")(1,"legend"),a(2),m(3,"button",1),C("click",function(){let o=f(e).$index,d=s();return y(d.onRemoveSection(o))}),a(4," X "),r()(),m(5,"button",0),C("click",function(){let o=f(e).$index,d=s();return y(d.onAddInput(o))}),a(6,"+ Input"),r(),g(7,ce,5,4,"div",null,$),m(9,"p")(10,"b"),a(11,"Result:"),r(),a(12),r()()}if(t&2){let e=n.$implicit,i=n.$index,o=s();c(2),p(" Section ",i+1," "),c(),S("disabled",o.inputForm.length===1),c(4),_(e),c(5),p(" ",o.sectionTotal(o.sectionModel()[i]))}}var E=class t{sectionModel=G.required();numberKey=Y();inputForm=Z(this.sectionModel);onAddSection(){this.inputForm().value.update(ie)}onRemoveSection(n){this.inputForm().value.update(e=>oe(e,n))}onAddInput(n){this.inputForm().value.update(e=>e.map((i,o)=>o===n?te(i,0):i))}onRemoveInput(n,e){this.inputForm().value.update(i=>i.map((o,d)=>d===n?ne(o,e):o))}sectionTotal(n){return n.reduce((e,i)=>e+(i??0),0)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-dynamic-section-form"]],inputs:{sectionModel:[1,"sectionModel"]},outputs:{sectionModel:"sectionModelChange"},decls:6,vars:0,consts:[["type","button",3,"click"],["type","button",3,"click","disabled"],["type","number",3,"formField"]],template:function(e,i){e&1&&(m(0,"fieldset")(1,"legend")(2,"button",0),C("click",function(){return i.onAddSection()}),a(3,"+ Section"),r()(),g(4,me,13,3,"fieldset",null,$),r()),e&2&&(c(4),_(i.inputForm))},dependencies:[ee],encapsulation:2,changeDetection:0})};var x=class t{keyName=`${u(j)}-section`;async get(){return JSON.parse(localStorage.getItem(this.keyName)??"null")}async set(n){return localStorage.setItem(this.keyName,JSON.stringify(n))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};function se(t,n){if(t&1){let e=w();m(0,"app-dynamic-section-form",1),K("sectionModelChange",function(o){f(e);let d=s();return q(d.dataResource.value,o)||(d.dataResource.value=o),y(o)}),r()}if(t&2){let e=s();W("sectionModel",e.dataResource.value)}}var P=class t{dataStorage=u(x);dataResource=M({loader:async()=>await this.dataStorage.get()??[[0]]});constructor(){L(async()=>{this.dataResource.hasValue()&&await this.dataStorage.set(this.dataResource.value())})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-dynamic-section-form-page"]],decls:1,vars:1,consts:[[3,"sectionModel"],[3,"sectionModelChange","sectionModel"]],template:function(e,i){e&1&&F(0,se,1,1,"app-dynamic-section-form",0),e&2&&I(i.dataResource.hasValue()?0:-1)},dependencies:[E],encapsulation:2,changeDetection:0})};function de(t,n){if(t&1&&(D(0,"div",4)(1,"span",5),a(2),b()()),t&2){let e=n.$implicit,i=n.$index;c(2),O(" Number ",i+1,": ",e," ")}}function le(t,n){if(t&1&&(D(0,"div",1)(1,"div",2)(2,"b")(3,"span",3),a(4),b()()(),g(5,de,3,2,"div",4,N),D(7,"p"),a(8),b()()),t&2){let e=n.$implicit,i=n.$index,o=s();c(4),p(" Section ",i+1," "),c(),_(e),c(3),p("Result ",o.total()[i])}}var T=class t{sections=z.required();total=X(()=>this.sections().map(n=>n.reduce((e,i)=>e+i,0)));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-dynamic-section-view"]],inputs:{sections:[1,"sections"]},decls:3,vars:0,consts:[[1,"section-view"],[1,"section"],[1,"section-header"],[1,"section-number"],[1,"section-numbers"],[1,"number-text"]],template:function(e,i){e&1&&(D(0,"div",0),g(1,le,9,2,"div",1,N),b()),e&2&&(c(),_(i.sections()))},encapsulation:2,changeDetection:0})};function pe(t,n){if(t&1&&v(0,"app-dynamic-section-view",0),t&2){let e=s();S("sections",e.dataResource.value())}}function ue(t,n){t&1&&(m(0,"p"),a(1,"No info"),r())}var k=class t{dataStorage=u(x);dataResource=M({loader:async()=>await this.dataStorage.get()??[]});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-dynamic-section-view-page"]],decls:2,vars:1,consts:[[3,"sections"]],template:function(e,i){e&1&&F(0,pe,1,1,"app-dynamic-section-view",0)(1,ue,2,0,"p"),e&2&&I(i.dataResource.hasValue()?0:1)},dependencies:[T],encapsulation:2,changeDetection:0})};var Ke=[{path:"",component:R,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:k},{path:"form",component:P}]}];export{Ke as default};
