import{a as $,b as j,c as te,d as ie,e as oe}from"./chunk-XHOUWVJK.js";import{$ as X,B as f,E as v,F as _,H as C,I as F,K as U,L as J,M as W,N as g,O as l,P as r,Q as m,R as c,S as s,T as w,U as E,V as u,W as n,X as h,Y as D,Z as q,_ as B,aa as z,ca as G,ea as I,fa as H,ga as Q,i as A,ia as Y,ja as Z,k as y,ka as ee,m as P,n as b,u as K,x as O,z as a}from"./chunk-GICHQEML.js";function L(){return""}function ne(){return{studentId:"",firstname:"",lastname:"",age:0,autobiography:"",friends:[L()]}}function le(o,i){if(o&1){let e=w();l(0,"div")(1,"button",8),E("click",function(){let d=P(e).$index,p=u();return b(p.moveFriend(d,-1))}),n(2,"^"),r(),l(3,"button",8),E("click",function(){let d=P(e).$index,p=u();return b(p.moveFriend(d,1))}),n(4,"V"),r(),l(5,"label")(6,"b"),n(7),r(),m(8,"input",2),v(),r(),l(9,"button",8),E("click",function(){let d=P(e).$index,p=u();return b(p.removeFriend(d))}),n(10,"X"),r()(),l(11,"div"),n(12),r()}if(o&2){let e=i.$implicit,t=i.$index,d=i.$index,p=i.$count,re=i.$count,ae=u();a(),g("disabled",d===0),a(2),g("disabled",d===re-1),a(4),D("Friend ",t+1),a(),_(e,"formField"),a(),g("disabled",p===1),a(3),D(" ",e().metadata(ae.friendUcNameKey)()," ")}}var N=class o{data=Q.required();friendCountKey=j();friendUcNameKey=j();form=te(this.data,i=>{$(i.friends,this.friendCountKey,e=>e.value().length),ie(i.friends,e=>{$(e,this.friendUcNameKey,({value:t})=>t().toLocaleUpperCase())})});addFriend(){this.form.friends().value.update(i=>[...i,L()])}removeFriend(i){this.form.friends().value.update(e=>e.filter((t,d)=>d!==i))}moveFriend(i,e){this.form.friends().value.update(t=>t.map((d,p)=>p===i?t[i+e]:p===i+e?t[i]:d))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-profile-form"]],inputs:{data:[1,"data"]},outputs:{data:"dataChange"},decls:35,vars:13,consts:[[1,"main-form",3,"disabled"],[1,"form-self-field"],["type","text",3,"formField"],["type","number","step","1",3,"formField"],[3,"formField"],[3,"disabled"],["type","button",3,"click"],[1,"friend-form"],["type","button",3,"click","disabled"]],template:function(e,t){e&1&&(l(0,"fieldset",0)(1,"div",1)(2,"label")(3,"b"),n(4,"Student ID"),r(),m(5,"input",2),v(),r(),m(6,"br"),l(7,"label")(8,"b"),n(9,"First Name"),r(),m(10,"input",2),v(),r(),m(11,"br"),l(12,"label")(13,"b"),n(14,"Last Name"),r(),m(15,"input",2),v(),r(),m(16,"br"),l(17,"label")(18,"b"),n(19,"Age"),r(),m(20,"input",3),v(),r(),m(21,"br"),l(22,"label")(23,"b"),n(24,"Autobiography"),r(),m(25,"br")(26,"textarea",4),v(),r()(),l(27,"fieldset",5)(28,"legend"),n(29),l(30,"button",6),E("click",function(){return t.addFriend()}),n(31,"+"),r()(),l(32,"div",7),J(33,le,13,7,null,null,U),r()()()),e&2&&(g("disabled",t.form().disabled()),a(5),_(t.form.studentId,"formField"),a(5),_(t.form.firstname,"formField"),a(5),_(t.form.lastname,"formField"),a(5),_(t.form.age,"formField"),a(6),_(t.form.autobiography,"formField"),a(),g("disabled",t.form.friends().disabled()),a(2),D(" Friends [",t.form.friends().metadata(t.friendCountKey)(),"] "),a(4),W(t.form.friends))},dependencies:[oe],styles:[".form-self-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}"],changeDetection:0})};var de="profile-data",x=class o{keyName=`${y(O)}-${de}`;async get(){return JSON.parse(localStorage.getItem(this.keyName)??"null")}async set(i){return localStorage.setItem(this.keyName,JSON.stringify(i))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"})};function me(o,i){if(o&1){let e=w();l(0,"app-profile-form",1),z("dataChange",function(d){P(e);let p=u();return X(p.dataResource.value,d)||(p.dataResource.value=d),b(d)}),r()}if(o&2){let e=u();B("data",e.dataResource.value)}}var k=class o{dataStorage=y(x);dataResource=I({loader:async()=>await this.dataStorage.get()??ne()});constructor(){K(async()=>{this.dataResource.hasValue()&&await this.dataStorage.set(this.dataResource.value())})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-profile-form-page"]],decls:1,vars:1,consts:[[3,"data"],[3,"dataChange","data"]],template:function(e,t){e&1&&C(0,me,1,1,"app-profile-form",0),e&2&&F(t.dataResource.hasValue()?0:-1)},dependencies:[N],encapsulation:2,changeDetection:0})};var R=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-profile-root"]],decls:9,vars:0,consts:[[1,"app-cmp-nav"],["routerLinkActive","app-st-active"],["routerLink","./view"],["routerLink","./form"]],template:function(e,t){e&1&&(l(0,"nav")(1,"ul",0)(2,"li",1)(3,"a",2),n(4," View "),r()(),l(5,"li",1)(6,"a",3),n(7," Form "),r()()()(),m(8,"router-outlet"))},dependencies:[Z,ee,Y],encapsulation:2,changeDetection:0})};var M=class o{data=H.required();joinFriend=G(()=>this.data().friends.join(", "));static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-profile-view"]],inputs:{data:[1,"data"]},decls:23,vars:6,consts:[[1,"_main-data"],[1,"app-cl-code"],[1,"app-cl-number"],[1,"_autobiography"]],template:function(e,t){e&1&&(c(0,"dl",0)(1,"dt"),n(2,"Student ID"),s(),c(3,"dd")(4,"span",1),n(5),s()(),c(6,"dt"),n(7,"Fullname"),s(),c(8,"dd"),n(9),s(),c(10,"dt"),n(11,"Age"),s(),c(12,"dd")(13,"span",2),n(14),s()(),c(15,"dt"),n(16,"Autobiography"),s(),c(17,"dd",3),n(18),s(),c(19,"dt"),n(20,"Friends"),s(),c(21,"dd"),n(22),s()()),e&2&&(a(5),h(t.data().studentId),a(4),q("",t.data().firstname," ",t.data().lastname),a(5),h(t.data().age),a(4),h(t.data().autobiography),a(4),h(t.joinFriend()))},encapsulation:2,changeDetection:0})};function pe(o,i){o&1&&m(0,"app-profile-view",0),o&2&&g("data",i)}function ce(o,i){o&1&&(l(0,"p"),n(1,"Not Found"),r())}function se(o,i){if(o&1&&C(0,pe,1,1,"app-profile-view",0)(1,ce,2,0,"p"),o&2){let e,t=u();F((e=t.dataResource.value())?0:1,e)}}var T=class o{dataStorage=y(x);dataResource=I({loader:async()=>await this.dataStorage.get()});static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-profile-view-page"]],decls:1,vars:1,consts:[[3,"data"]],template:function(e,t){e&1&&C(0,se,2,1),e&2&&F(t.dataResource.hasValue()?0:-1)},dependencies:[M],encapsulation:2,changeDetection:0})};var qe=[{path:"",component:R,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:T},{path:"form",component:k}]}];export{qe as default};
